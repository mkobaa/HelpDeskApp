{"file":"profile-BOnZumZk.js","mappings":"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","names":["_withAsyncContext","_push","_parent","_ssrRenderComponent","_","_scopeId","_unref","_createVNode","_createBlock","_ssrInterpolate","_toDisplayString"],"sources":["../../../../../../../app/pages/admin/profile.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { onNuxtReady } from '#imports'\r\n\r\nconst token = useCookie('auth_token')\r\n\r\nconst fetchProfile = async () => {\r\n\tlet bearer = token.value || ''\r\n\ttry {\r\n\t\tbearer = decodeURIComponent(bearer)\r\n\t} catch {\r\n\t\t// keep original if decoding fails\r\n\t}\r\n\r\n\tconst response = await fetch('http://localhost:8000/api/user', {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${bearer}`\r\n\t\t}\r\n\t})\r\n\r\n\tconst raw = await response.json()\r\n\tif (!response.ok) {\r\n\t\tthrow raw\r\n\t}\r\n\r\n\treturn raw?.data || raw?.user || raw\r\n}\r\n\r\nconst { data: user, status, error, refresh } = await useAsyncData(\r\n\t'current-user',\r\n\tfetchProfile,\r\n\t{\r\n\t\tserver: false,\r\n\t\tlazy: true,\r\n\t\timmediate: false\r\n\t}\r\n)\r\n\r\nonNuxtReady(() => {\r\n\trefresh()\r\n})\r\n</script>\r\n\r\n<template>\r\n\t<UDashboardGroup>\r\n\t\t<Sidebar />\r\n\t\t<UDashboardPage class=\"flex flex-col flex-1 min-w-0 overflow-hidden\">\r\n\t\t\t<Navbar title=\"My profile\" icon=\"i-lucide-user\" class=\"w-full\" />\r\n\t\t\t<div class=\"flex flex-col flex-1 gap-6 p-6 overflow-auto\">\r\n\t\t\t\t<div class=\"flex items-center justify-between gap-3\">\r\n\t\t\t\t\t<UDashboardPageHeader\r\n\t\t\t\t\t\t:title=\"user?.username || 'Profile'\"\r\n\t\t\t\t\t\t:description=\"user?.email || ''\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<UButton size=\"sm\" icon=\"i-lucide-refresh-ccw\" variant=\"outline\" @click=\"refresh\">\r\n\t\t\t\t\t\tRefresh\r\n\t\t\t\t\t</UButton>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<UCard>\r\n\t\t\t\t\t<template #header>\r\n\t\t\t\t\t\t<div class=\"flex items-center justify-between\">\r\n\t\t\t\t\t\t\t<p class=\"text-sm font-semibold text-highlighted\">Profile</p>\r\n\t\t\t\t\t\t\t<div class=\"text-xs text-muted\" v-if=\"status === 'pending'\">Loading...</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<div class=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p class=\"text-xs text-muted\">Username</p>\r\n\t\t\t\t\t\t\t<p class=\"text-sm text-highlighted\">{{ user?.username || '—' }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p class=\"text-xs text-muted\">Email</p>\r\n\t\t\t\t\t\t\t<p class=\"text-sm text-highlighted\">{{ user?.email || '—' }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p class=\"text-xs text-muted\">Role</p>\r\n\t\t\t\t\t\t\t<p class=\"text-sm text-highlighted\">{{ user?.role || '—' }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p class=\"text-xs text-muted\">Department</p>\r\n\t\t\t\t\t\t\t<p class=\"text-sm text-highlighted\">{{ user?.department || '—' }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-if=\"error\" class=\"mt-4 text-sm text-error\">Failed to load profile.</div>\r\n\t\t\t\t</UCard>\r\n\t\t\t</div>\r\n\t\t</UDashboardPage>\r\n\t</UDashboardGroup>\r\n</template>\r\n"],"version":3}