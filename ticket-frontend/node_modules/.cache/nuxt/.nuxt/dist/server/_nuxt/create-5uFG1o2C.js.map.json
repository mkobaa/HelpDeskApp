{"file":"create-5uFG1o2C.js","mappings":"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","names":["_push","_parent","_ssrRenderComponent","_","_scopeId","_createVNode"],"sources":["../../../../../../../app/api/users/createUser.js","../../../../../../../app/pages/admin/users/create.vue"],"sourcesContent":["export const createUser = async ({ username, email, password, role, department }) => {\r\n  const token = useCookie('auth_token')\r\n  let bearer = token.value || ''\r\n  try {\r\n    bearer = decodeURIComponent(bearer)\r\n  } catch {\r\n    // keep original if decoding fails\r\n  }\r\n\r\n  const allowedRoles = ['user', 'technician', 'supervisor', 'admin']\r\n  if (role && !allowedRoles.includes(role)) {\r\n    throw new Error('Invalid role. Allowed roles: user, technician, supervisor, admin')\r\n  }\r\n\r\n  const response = await fetch('http://localhost:8000/api/users', {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${bearer}`\r\n    },\r\n    body: JSON.stringify({\r\n      username,\r\n      email,\r\n      password,\r\n      role,\r\n      department\r\n    })\r\n  })\r\n\r\n  const data = await response.json()\r\n  if (!response.ok) {\r\n    throw data\r\n  }\r\n\r\n  return data\r\n}\r\n","<script setup lang=\"ts\">\r\nimport { reactive, ref } from 'vue'\r\nimport { createUser } from '~/api/users/createUser'\r\nimport { useRouter } from '#imports'\r\n\r\nconst form = reactive({\r\n\tusername: '',\r\n\temail: '',\r\n\tpassword: '',\r\n\trole: '',\r\n\tdepartment: ''\r\n})\r\n\r\nconst roles = ref(['user', 'technician', 'supervisor', 'admin'])\r\nconst isSubmitting = ref(false)\r\nconst router = useRouter()\r\n\r\nconst handleCreate = async () => {\r\n\tif (isSubmitting.value)\r\n\t\treturn\r\n\tisSubmitting.value = true\r\n\ttry {\r\n\t\tawait createUser({\r\n\t\t\tusername: form.username,\r\n\t\t\temail: form.email,\r\n\t\t\tpassword: form.password,\r\n\t\t\trole: form.role || undefined,\r\n\t\t\tdepartment: form.department || undefined\r\n\t\t})\r\n\t\tawait router.push('/admin/users')\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to create user', error)\r\n\t} finally {\r\n\t\tisSubmitting.value = false\r\n\t}\r\n}\r\n</script>\r\n\r\n<template>\r\n\t<UDashboardGroup>\r\n\t\t<Sidebar />\r\n\t\t<UDashboardPage class=\"flex flex-col flex-1 min-w-0 overflow-hidden\">\r\n\t\t\t<Navbar title=\"Create user\" icon=\"i-lucide-user-plus\" class=\"w-full\" />\r\n\t\t\t<div class=\"flex flex-col flex-1 gap-6 p-6 overflow-auto\">\r\n\t\t\t\t<form class=\"flex flex-col gap-4 max-w-3xl w-full\" @submit.prevent=\"handleCreate\">\r\n\t\t\t\t\t<div class=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n\t\t\t\t\t\t<UFormGroup label=\"Username\" name=\"username\">\r\n\t\t\t\t\t\t\t<UInput v-model=\"form.username\" placeholder=\"jane.doe\" required maxlength=\"255\" />\r\n\t\t\t\t\t\t</UFormGroup>\r\n\t\t\t\t\t\t<UFormGroup label=\"Email\" name=\"email\">\r\n\t\t\t\t\t\t\t<UInput v-model=\"form.email\" type=\"email\" placeholder=\"jane@example.com\" required maxlength=\"255\" />\r\n\t\t\t\t\t\t</UFormGroup>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<UFormGroup label=\"Password\" name=\"password\">\r\n\t\t\t\t\t\t<UInput v-model=\"form.password\" type=\"password\" placeholder=\"min 8 characters\" required minlength=\"8\" />\r\n\t\t\t\t\t</UFormGroup>\r\n\r\n\t\t\t\t\t<UFormGroup label=\"Role (optional)\" name=\"role\">\r\n\t\t\t\t\t\t<USelect v-model=\"form.role\" :items=\"roles\" placeholder=\"Select role\" />\r\n\t\t\t\t\t</UFormGroup>\r\n\r\n\t\t\t\t\t<UFormGroup label=\"Department (optional)\" name=\"department\">\r\n\t\t\t\t\t\t<UInput v-model=\"form.department\" placeholder=\"IT Support\" maxlength=\"255\" />\r\n\t\t\t\t\t</UFormGroup>\r\n\r\n\t\t\t\t\t<div class=\"flex justify-end gap-3 pt-2\">\r\n\t\t\t\t\t\t<UButton color=\"neutral\" variant=\"ghost\" to=\"/admin/users\">Cancel</UButton>\r\n\t\t\t\t\t\t<UButton :loading=\"isSubmitting\" :disabled=\"isSubmitting\" type=\"submit\" color=\"primary\" icon=\"i-lucide-check\">Create</UButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</UDashboardPage>\r\n\t</UDashboardGroup>\r\n</template>"],"version":3}