{"file":"create-COZqxBpr.js","mappings":"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","names":["_push","_parent","_ssrRenderComponent","_","_scopeId","_createVNode"],"sources":["../../../../../../../app/api/categories/createCategory.js","../../../../../../../app/pages/admin/categories/create.vue"],"sourcesContent":["export const createCategory = async ({ name, description, parentId }) => {\r\n  const token = useCookie('auth_token')\r\n  let bearer = token.value || ''\r\n  try {\r\n    bearer = decodeURIComponent(bearer)\r\n  } catch {\r\n    // keep original if decoding fails\r\n  }\r\n  const role = useCookie('user_role').value\r\n  const allowedRoles = ['user', 'technician', 'supervisor', 'admin']\r\n  if (role && !allowedRoles.includes(role)) {\r\n    throw new Error('Invalid role. Allowed roles: user, technician, supervisor, admin')\r\n  }\r\n\r\n  const response = await fetch('http://localhost:8000/api/categories', {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${bearer}`\r\n    },\r\n    body: JSON.stringify({\r\n        name,\r\n        description,\r\n        parent_category_id: parentId || null\r\n    })\r\n  })\r\n\r\n  const data = await response.json()\r\n  if (!response.ok) {\r\n    throw data\r\n  }\r\n\r\n  return data\r\n}\r\n","<script setup lang=\"ts\">\r\nimport { reactive, ref } from 'vue'\r\nimport { createCategory } from '~/api/categories/createCategory'\r\nimport { useRouter } from '#imports'\r\n\r\n\r\nconst form = reactive({\r\n\tname: '',\r\n\tdescription: '',\r\n\tparentId: null\r\n})\r\n\r\nconst isSubmitting = ref(false)\r\nconst router = useRouter()\r\n\r\nconst handleCreate = async () => {\r\n\tif (isSubmitting.value) return\r\n\tisSubmitting.value = true\r\n\ttry {\r\n\t\tawait createCategory({\r\n\t\t\tname: form.name,\r\n\t\t\tdescription: form.description,\r\n\t\t\tparentId: form.parentId || undefined\r\n\t\t})\r\n\t\tawait router.push('/admin/categories')\r\n\t} catch (error) {\r\n\t\tconsole.error('Failed to create category', error)\r\n\t} finally {\r\n\t\tisSubmitting.value = false\r\n\t}\r\n}\r\n</script>\r\n\r\n<template>\r\n\t<UDashboardGroup>\r\n\t\t<Sidebar />\r\n\t\t<UDashboardPage class=\"flex flex-col flex-1 min-w-0 overflow-hidden\">\r\n\t\t\t<Navbar title=\"Create category\" icon=\"i-lucide-folder-plus\" class=\"w-full\" />\r\n\t\t\t<div class=\"flex flex-col flex-1 gap-6 p-6 overflow-auto\">\r\n\t\t\t\t<form class=\"flex flex-col gap-4 max-w-3xl w-full\" @submit.prevent=\"handleCreate\">\r\n\t\t\t\t\t<div class=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n\t\t\t\t\t\t<UFormGroup label=\"Name\" name=\"name\">\r\n\t\t\t\t\t\t\t<UInput v-model=\"form.name\" placeholder=\"Category Name\" required maxlength=\"255\" />\r\n\t\t\t\t\t\t</UFormGroup>\r\n\t\t\t\t\t\t<UFormGroup label=\"Description\" name=\"description\">\r\n\t\t\t\t\t\t\t<UInput v-model=\"form.description\" placeholder=\"Category Description\" maxlength=\"255\" />\r\n\t\t\t\t\t\t</UFormGroup>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div class=\"flex justify-end gap-3 pt-2\">\r\n\t\t\t\t\t\t<UButton color=\"neutral\" variant=\"ghost\" to=\"/admin/categories\">Cancel</UButton>\r\n\t\t\t\t\t\t<UButton :loading=\"isSubmitting\" :disabled=\"isSubmitting\" type=\"submit\" color=\"primary\" icon=\"i-lucide-check\">Create</UButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</UDashboardPage>\r\n\t</UDashboardGroup>\r\n</template>"],"version":3}