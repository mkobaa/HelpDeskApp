{"file":"tickets-BxG6Zsyw.js","mappings":"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","names":[],"sources":["../../../../../../../app/api/tickets/tickets.js"],"sourcesContent":["export const getTickets = async (criteria = {}) => {\r\n    const token = useCookie('auth_token')\r\n    let bearer = token.value || ''\r\n    try {\r\n        bearer = decodeURIComponent(bearer)\r\n    } catch {\r\n        // keep original if decoding fails\r\n    }\r\n\r\n    const params = new URLSearchParams()\r\n    if (criteria.status) params.append('status', criteria.status)\r\n    if (criteria.priority) params.append('priority', criteria.priority)\r\n    if (criteria.category_id) params.append('category_id', criteria.category_id)\r\n    // pagination\r\n    if (criteria.page) params.append('page', String(criteria.page))\r\n    if (criteria.per_page) params.append('per_page', String(criteria.per_page))\r\n\r\n    // Support legacy name parameter if passed as string, though unlikely given typescript usage elsewhere\r\n    if (typeof criteria === 'string') {\r\n        params.append('name', criteria)\r\n    } else if (criteria.name) {\r\n        params.append('name', criteria.name)\r\n    }\r\n\r\n    let url = 'http://localhost:8000/api/tickets'\r\n    const queryString = params.toString()\r\n    if (queryString) {\r\n        url += `?${queryString}`\r\n    }\r\n\r\n    const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${bearer}`\r\n        }\r\n    })\r\n\r\n    const raw = await response.json()\r\n    if (!response.ok) {\r\n        throw raw\r\n    }\r\n    // If caller requested raw response (to access pagination meta), return it directly\r\n    if (criteria._raw) return raw\r\n\r\n    // Support paginated API: { data: { data: [...] } }\r\n    if (raw?.data?.data && Array.isArray(raw.data.data)) return raw.data.data\r\n    if (Array.isArray(raw)) return raw\r\n    if (Array.isArray(raw.data)) return raw.data\r\n    if (Array.isArray(raw.tickets)) return raw.tickets\r\n    return []\r\n}\r\n\r\nexport const getTicketById = async (id) => {\r\n    if (!id) return null\r\n\r\n    const token = useCookie('auth_token')\r\n    let bearer = token.value || ''\r\n    try {\r\n        bearer = decodeURIComponent(bearer)\r\n    } catch {\r\n        // keep original if decoding fails\r\n    }\r\n\r\n    const url = `http://localhost:8000/api/tickets/${encodeURIComponent(id)}`\r\n\r\n    try {\r\n        const response = await fetch(url, {\r\n            method: 'GET',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${bearer}`\r\n            }\r\n        })\r\n\r\n        const raw = await response.json()\r\n\r\n        if (!response.ok) {\r\n            console.error('getTicketById failed', raw)\r\n            return null\r\n        }\r\n\r\n        if (raw?.data) return raw.data\r\n        if (raw?.ticket) return raw.ticket\r\n        return raw ?? null\r\n    } catch (err) {\r\n        console.error('getTicketById network error', err)\r\n        return null\r\n    }\r\n}\r\n\r\n\r\nexport const getTechniciansWorkload = async () => {\r\n    const token = useCookie('auth_token')\r\n    let bearer = token.value || '' \r\n    try {\r\n        bearer = decodeURIComponent(bearer)\r\n    } catch {\r\n        // keep original if decoding fails\r\n    }\r\n    const url = 'http://localhost:8000/api/technicians/workloads'\r\n    const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${bearer}`\r\n        }\r\n    })\r\n    const raw = await response.json()\r\n    if (!response.ok) {\r\n        throw raw\r\n    }\r\n    if (Array.isArray(raw?.data)) return raw.data\r\n    return []\r\n}\r\n\r\n\r\n\r\nexport const getAssignedTickets = async (technicianId) => {\r\n    const token = useCookie('auth_token')\r\n    let bearer = token.value || ''\r\n    try {\r\n        bearer = decodeURIComponent(bearer)\r\n    } catch {\r\n        // keep original if decoding fails\r\n    }\r\n    const url = `http://localhost:8000/api/technicians/${encodeURIComponent(technicianId)}/assigned-tickets`\r\n    const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${bearer}`\r\n        }\r\n    })\r\n    const raw = await response.json()\r\n    if (!response.ok) {\r\n        throw raw\r\n    }\r\n    // Support paginated API shape: { data: { data: [...] , ...pagination } }\r\n    if (Array.isArray(raw?.data?.data)) return raw.data.data\r\n    if (Array.isArray(raw?.data)) return raw.data\r\n    if (Array.isArray(raw?.tickets)) return raw.tickets\r\n    if (Array.isArray(raw)) return raw\r\n    return []\r\n}\r\n\r\n"],"version":3}