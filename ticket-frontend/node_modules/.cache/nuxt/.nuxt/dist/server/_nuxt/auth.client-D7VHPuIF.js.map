{"version":3,"file":"auth.client-D7VHPuIF.js","sources":["../../../../../../../app/middleware/auth.client.js"],"sourcesContent":["export default defineNuxtPlugin(async () => {\r\n  const authToken = useCookie('auth_token')\r\n  const userRole = useCookie('user_role')\r\n\r\n  // No token → nothing to validate\r\n  if (!authToken.value) return\r\n\r\n  try {\r\n    await $fetch('http://localhost:8000/api/auth/check', {\r\n      method: 'GET',\r\n      headers: {\r\n        Authorization: `Bearer ${authToken.value}`,\r\n        Accept: 'application/json'\r\n      }\r\n    })\r\n    // Token is valid → do nothing\r\n  } catch (error) {\r\n    // Token exists but is invalid\r\n    useCookie('auth_token', { path: '/' }).value = null\r\n    useCookie('user_role', { path: '/' }).value = null\r\n    await navigateTo('/login')\r\n  }\r\n})\r\n"],"names":["__executeAsync"],"mappings":";;;;;;;;;;;;;;;;;;;AACA,MAAA,cAAe,iBAAiB,YAAW;AAAA,MAAA,QAAA;AACzC,QAAM,YAAY,UAAU,YAAW;AACzC,YAAA,WAAA;AAGA,MAAA,CAAA,UAAA,MAAA;AAEE,MAAC;AACC;AAAC,IAAE,CAAC,QAAO,SAAK,IAAAA,aAAA,MAAA,OAAA,wCAAA;AAAA,MACd,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,eAAe,UAAU,UAAC,KAAA;AAAA,QAC3B,QAAA;AAAA,MACP;AAAA,IACA,CAAK,CAAC,GAAG,MAAM,QAAO;EAEpB,SAAS,OAAO;AAEd,cAAU,cAAc,EAAE,MAAM,IAAG,CAAE,EAAE,QAAQ;AAChD,cAAA,aAAA,EAAA,MAAA,IAAA,CAAA,EAAA,QAAY;AACZ,IAAA,CAAA,QAAA,SAAA,IAAAA,aAAA,MAAA,WAAA,QAAA,CAAA,GAAA,MAAA,QAAA,UAAA;AAAA,EACH;;"}