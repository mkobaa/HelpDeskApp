{"file":"_id_-l6Z0d-L_.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,UAAM,QAAQ;AASd,UAAM,UAAU;AAAA,MACd,EAAE,aAAa,MAAM,QAAQ,KAAA;AAAA,MAC7B,EAAE,aAAa,SAAS,QAAQ,QAAA;AAAA,MAChC,EAAE,aAAa,eAAe,QAAQ,cAAA;AAAA,MACtC,EAAE,aAAa,UAAU,QAAQ,SAAA;AAAA,MACjC,EAAE,aAAa,YAAY,QAAQ,WAAA;AAAA,MACnC,EAAE,aAAa,iBAAiB,QAAQ,WAAA;AAAA,MACxC,EAAE,aAAa,cAAc,QAAQ,aAAA;AAAA,MACrC;AAAA,QACE,aAAa;AAAA,QACb,QAAQ;AAAA;AAAA,MAAA;AAAA,IAEV;AAIF,UAAM,EAAE,MAAM,SAAS,QAAQ,QAAA,KAAY,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM;AAAA,MAC/C;AAAA,MACA,MAAM,MAAM,eAAe,mBAAmB,MAAM,YAAY,IAAI,mBAAmB,EAAE;AAAA,MACzF;AAAA,QACE,OAAO,CAAC,MAAM,MAAM,SAAS,MAAM,MAAM,YAAY;AAAA,QACrD,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,SAAS,MAAM,CAAA;AAAA,MAAC;AAAA,IAClB,CACF;AAEA,UAAM,OAAO,SAAS,MAAM;AAE1B,UAAI,CAAC,QAAQ,MAAO,QAAO,CAAA;AAC3B,UAAI,MAAM,QAAQ,QAAQ,KAAK,UAAU,QAAQ;AACjD,UAAI,QAAQ,MAAM,QAAQ,MAAM,QAAQ,QAAQ,MAAM,IAAI,EAAG,QAAO,QAAQ,MAAM;AAClF,UAAI,QAAQ,MAAM,QAAQ,QAAQ,MAAM,KAAK,QAAQ,MAAM,QAAQ,QAAQ,MAAM,KAAK,IAAI,EAAG,QAAO,QAAQ,MAAM,KAAK;AACvH,aAAO,CAAA;AAAA,IACT,CAAC;AAED,UAAM,kBAAkB,CAAC,MAAM;AAC7B,YAAM,MAAM;AAAA,QACV,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,UAAU;AAAA,MAAA;AAEZ,aAAO,IAAI,OAAO,CAAC,CAAC,KAAK;AAAA,IAC3B;AAEA,UAAM,cAAc,CAAC,MAAM;AACzB,YAAM,MAAM;AAAA,QACV,MAAM;AAAA,QACN,aAAa;AAAA,QACb,SAAS;AAAA,QACT,UAAU;AAAA,QACV,QAAQ;AAAA,MAAA;AAEV,aAAO,IAAI,OAAO,CAAC,CAAC,KAAK;AAAA,IAC3B;AAEA,UAAM,cAAc,CAAC,MAAM;AACzB,UAAI,CAAC,EAAG,QAAO;AACf,UAAI,MAAM,cAAe,QAAO;AAChC,aAAO,OAAO,CAAC,EAAE,QAAQ,MAAM,GAAG,EAAE,QAAQ,SAAS,CAAA,MAAK,EAAE,YAAA,CAAa;AAAA,IAC3E;AAkBA,UAAM,OAAO,UAAU,MAAM;AAC7B,QAAI,OAAO;AACX,QAAI,KAAK,UAAU,cAAc;AAC/B,aAAO;AAAA,IACT,WACS,KAAK,UAAU,cAAc;AACpC,aAAO;AAAA,IACT,WACS,KAAK,UAAU,QAAQ;AAC9B,aAAO;AAAA,IACT;;;;;;QAUK,MAAMC,MAAA,IAAA;AAAA,QACN;AAAA,QACA,SAASA,MAAA,MAAA,MAAM;AAAA,MAAA;QAEL,wBAAX,CAYW,EAAA,OAAAC,QAAAC,UAAA,aAAA;;;;cATL,MAAK;AAAA,cACL,OAAM;AAAA,cACN,SAAQ;AAAA,cACR,MAAK;AAAA,cACJ,OAAOF,MAAA,IAAA,CAAI,GAAG,IAAI,SAAS,EAAE;AAAA,YAAA;+BALhC,CAQU,GAAAC,QAAAC,UAAAC,cAAA;;;;;oCAFT,QAED;AAAA,kBAAA;AAAA;;;;;;;cATFC,YAUM,OAAA,EAVD,OAAM,gBAAY;AAAA,gBACrBA,YAQU,oBAAA;AAAA,kBAPR,MAAK;AAAA,kBACL,OAAM;AAAA,kBACN,SAAQ;AAAA,kBACR,MAAK;AAAA,kBACJ,OAAOJ,MAAA,IAAA,CAAI,GAAG,IAAI,SAAS,EAAE;AAAA,gBAAA;mCAC/B,MAED;AAAA,oCAFC,QAED;AAAA,kBAAA;;;;;;;QAGO,uBAAX,CAMa,EAAA,OAAAC,QAAAC,UAAA,aAAA;;;;cAJC,OAAM;AAAA,cAAU,SAAQ;AAAA,cAAQ,UAAU,YAAY,IAAI,SAAS,MAAM,CAAA;AAAA,YAAA;+BAAjF,CAES,GAAAD,QAAAC,UAAAC,cAAA;;AADJF,yBAAA,GAAAI,eAAA,YAAY,IAAI,SAAS,MAAM,CAAA,CAAA,EAAA;AAAA;;oBAA/BC,gBAAAC,gBAAA,YAAY,IAAI,SAAS,MAAM,CAAA,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;;;;cAFtCH,YAIM,OAAA,EAJD,OAAM,uBAAmB;AAAA,gBAC5BA,YAES,mBAAA;AAAA,kBAFD,OAAM;AAAA,kBAAU,SAAQ;AAAA,kBAAQ,UAAU,YAAY,IAAI,SAAS,MAAM,CAAA;AAAA,gBAAA;mCAC/E,MAAsC;AAAA,oBAAnCE,gBAAAC,gBAAA,YAAY,IAAI,SAAS,MAAM,CAAA,GAAA,CAAA;AAAA,kBAAA;;;;;;;QAI7B,yBAAX,CAMW,EAAA,OAAAN,QAAAC,UAAA,aAAA;;;;cAJC,OAAM;AAAA,cAAU,SAAQ;AAAA,cAAQ,UAAU,gBAAgB,IAAI,SAAS,QAAQ,CAAA;AAAA,YAAA;+BAAvF,CAES,GAAAD,QAAAC,UAAAC,cAAA;;AADJF,yBAAA,GAAAI,eAAA,YAAY,IAAI,SAAS,QAAQ,CAAA,CAAA,EAAA;AAAA;;oBAAjCC,gBAAAC,gBAAA,YAAY,IAAI,SAAS,QAAQ,CAAA,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;;;;cAFxCH,YAIM,OAAA,EAJD,OAAM,uBAAmB;AAAA,gBAC5BA,YAES,mBAAA;AAAA,kBAFD,OAAM;AAAA,kBAAU,SAAQ;AAAA,kBAAQ,UAAU,gBAAgB,IAAI,SAAS,QAAQ,CAAA;AAAA,gBAAA;mCACrF,MAAwC;AAAA,oBAArCE,gBAAAC,gBAAA,YAAY,IAAI,SAAS,QAAQ,CAAA,GAAA,CAAA;AAAA,kBAAA;;;;;;;;;;;;;;;;;;;;;;;ACpIhD,UAAM,QAAQ,SAAA;AACC,cAAA;AACf,UAAM,SAAS,SAAS,MAAM,MAAM,OAAO,EAAY;AACvD,UAAM,YAAY,IAAI,KAAK;AACN,QAAI,KAAK;AAE9B,UAAM,OAAO,SAAS;AAAA,MACpB,UAAU;AAAA,MACV,OAAO;AAAA,MACP,UAAU;AAAA,MACV,MAAM;AAAA,MACN,YAAY;AAAA,IAAA,CACb;AAED,UAAM,OAAO,IAAI,IAAW;AAC5B,UAAM,SAAS,IAAwC,MAAM;AAC7D,UAAM,QAAQ,IAAI,IAAW;AAI7B,UAAM,WAAW,YAAY;AAC3B,UAAI,CAAC,OAAO,MAAO;AACnB,aAAO,QAAQ;AACf,YAAM,QAAQ;AACd,UAAI;AACF,cAAM,OAAO,MAAM,cAAc,OAAO,KAAK;AAC7C,aAAK,QAAQ;AACb,aAAK,WAAW,MAAM,YAAY;AAClC,aAAK,QAAQ,MAAM,SAAS;AAC5B,aAAK,OAAO,MAAM,QAAQ;AAC1B,aAAK,aAAa,MAAM,cAAc;AACtC,eAAO,QAAQ;AAAA,MACjB,SAAS,KAAK;AACZ,cAAM,QAAQ;AACd,eAAO,QAAQ;AAAA,MACjB;AAAA,IACF;AAMA,UAAM,QAAQ,CAAC,GAAG,OAAO;AAAE,UAAI,KAAK,MAAM,GAAI,UAAA;AAAA,IAAW,CAAC;;;;;;;;;yBAKxD,CAiDkB,GAAAN,QAAAC,UAAA,aAAA;;;AA/CAD,mBAAAO,mBAAA,2BAAA,EAAA,OAAM,kDAA8C;AAAA,+BAApE,CA8CiBC,IAAAR,QAAAC,UAAAC,cAAA;;;oBA7CP,OAAM;AAAA,oBAAe,MAAK;AAAA,oBAAgB,OAAM;AAAA,kBAAA;;;oBAIjD,OAAO,KAAA,OAAM,YAAQ;AAAA,oBACrB,aAAa,KAAA,OAAM,SAAK;AAAA,kBAAA;;;oBAMhB,gBAAX,CAKWM,IAAAR,QAAAC,UAAAC,cAAA;;;4BAF+B,OAAA,UAAM,WAAA;;;;;;;;0BAF9CC,YAGM,OAAA,EAHD,OAAM,uCAAmC;AAAA,4BAC5CA,YAA6D,KAAA,EAA1D,OAAM,yCAAA,GAAyC,SAAO;AAAA,4BACnB,OAAA,UAAM,0BAA5CM,YAA4E,OAAA;AAAA;8BAAvE,OAAM;AAAA,4BAAA,GAAiD,YAAU;;;;;qCAJ5E,CA4BQD,IAAAR,QAAAC,UAAAC,cAAA;;6BAnBM,UAAA,OAAS;0NAGsBE,eAAA,KAAA,OAAM,YAAQ,GAAA,kIAIdA,eAAA,KAAA,OAAM,SAAK,GAAA,iIAIXA,eAAA,KAAA,OAAM,QAAI,GAAA,uIAIVA,eAAA,KAAA,OAAM,cAAU,GAAA;;;;;;2BAf/C,UAAA,sBAAZK,YAiBM,OAAA;AAAA;4BAjBiB,OAAM;AAAA,0BAAA;4BAC3BN,YAGM,OAAA,MAAA;AAAA,8BAFJA,YAA0C,KAAA,EAAvC,OAAM,qBAAA,GAAqB,UAAQ;AAAA,8BACtCA,YAAmE,OAAhE,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,YAAQ,GAAA,GAAA,CAAA;AAAA,4BAAA;4BAEvDH,YAGM,OAAA,MAAA;AAAA,8BAFJA,YAAuC,KAAA,EAApC,OAAM,qBAAA,GAAqB,OAAK;AAAA,8BACnCA,YAAgE,OAA7D,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,SAAK,GAAA,GAAA,CAAA;AAAA,4BAAA;4BAEpDH,YAGM,OAAA,MAAA;AAAA,8BAFJA,YAAsC,KAAA,EAAnC,OAAM,qBAAA,GAAqB,MAAI;AAAA,8BAClCA,YAA+D,OAA5D,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,QAAI,GAAA,GAAA,CAAA;AAAA,4BAAA;4BAEnDH,YAGM,OAAA,MAAA;AAAA,8BAFJA,YAA4C,KAAA,EAAzC,OAAM,qBAAA,GAAqB,YAAU;AAAA,8BACxCA,YAAqE,OAAlE,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,cAAU,GAAA,GAAA,CAAA;AAAA,4BAAA;;;;;;;;AAQlC,sBAAA,KAAA,OAAM,IAAE;;sBAAG,cAAc,KAAA,MAAK;AAAA,oBAAA;;;;;;;oBA1C3DH,YAAmE,mBAAA;AAAA,sBAA3D,OAAM;AAAA,sBAAe,MAAK;AAAA,sBAAgB,OAAM;AAAA,oBAAA;oBACxDA,YA2CM,OAAA,EA3CD,OAAM,kDAA8C;AAAA,sBACvDA,YAMM,OAAA,EAND,OAAM,6CAAyC;AAAA,wBAClDA,YAGE,iCAAA;AAAA,0BAFC,OAAO,KAAA,OAAM,YAAQ;AAAA,0BACrB,aAAa,KAAA,OAAM,SAAK;AAAA,wBAAA;;sBAK7BA,YA4BQ,kBAAA,MAAA;AAAA,wBA3BK,gBACT,MAGM;AAAA,0BAHNA,YAGM,OAAA,EAHD,OAAM,uCAAmC;AAAA,4BAC5CA,YAA6D,KAAA,EAA1D,OAAM,yCAAA,GAAyC,SAAO;AAAA,4BACnB,OAAA,UAAM,0BAA5CM,YAA4E,OAAA;AAAA;8BAAvE,OAAM;AAAA,4BAAA,GAAiD,YAAU;;;yCAK1E,MAiBM;AAAA,2BAjBM,UAAA,sBAAZA,YAiBM,OAAA;AAAA;4BAjBiB,OAAM;AAAA,0BAAA;4BAC3BN,YAGM,OAAA,MAAA;AAAA,8BAFJA,YAA0C,KAAA,EAAvC,OAAM,qBAAA,GAAqB,UAAQ;AAAA,8BACtCA,YAAmE,OAAhE,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,YAAQ,GAAA,GAAA,CAAA;AAAA,4BAAA;4BAEvDH,YAGM,OAAA,MAAA;AAAA,8BAFJA,YAAuC,KAAA,EAApC,OAAM,qBAAA,GAAqB,OAAK;AAAA,8BACnCA,YAAgE,OAA7D,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,SAAK,GAAA,GAAA,CAAA;AAAA,4BAAA;4BAEpDH,YAGM,OAAA,MAAA;AAAA,8BAFJA,YAAsC,KAAA,EAAnC,OAAM,qBAAA,GAAqB,MAAI;AAAA,8BAClCA,YAA+D,OAA5D,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,QAAI,GAAA,GAAA,CAAA;AAAA,4BAAA;4BAEnDH,YAGM,OAAA,MAAA;AAAA,8BAFJA,YAA4C,KAAA,EAAzC,OAAM,qBAAA,GAAqB,YAAU;AAAA,8BACxCA,YAAqE,OAAlE,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,cAAU,GAAA,GAAA,CAAA;AAAA,4BAAA;;;;;sBAM7DH,YAGM,OAAA,EAHD,OAAM,UAAM;AAAA,wBACfA,YAA2E,KAAA,EAAxE,OAAM,8CAAA,GAA8C,kBAAgB;AAAA,wBAC9C,KAAA,OAAM,mBAA/BM,YAA6D,mBAAA;AAAA;0BAAzB,cAAc,KAAA,MAAK;AAAA,wBAAA;;;;;;;;;;cA5C7DN,YAAW,kBAAA;AAAA,cACXA,YA8CiB,2BAAA,EA9CD,OAAM,kDAA8C;AAAA,iCAClE,MAAmE;AAAA,kBAAnEA,YAAmE,mBAAA;AAAA,oBAA3D,OAAM;AAAA,oBAAe,MAAK;AAAA,oBAAgB,OAAM;AAAA,kBAAA;kBACxDA,YA2CM,OAAA,EA3CD,OAAM,kDAA8C;AAAA,oBACvDA,YAMM,OAAA,EAND,OAAM,6CAAyC;AAAA,sBAClDA,YAGE,iCAAA;AAAA,wBAFC,OAAO,KAAA,OAAM,YAAQ;AAAA,wBACrB,aAAa,KAAA,OAAM,SAAK;AAAA,sBAAA;;oBAK7BA,YA4BQ,kBAAA,MAAA;AAAA,sBA3BK,gBACT,MAGM;AAAA,wBAHNA,YAGM,OAAA,EAHD,OAAM,uCAAmC;AAAA,0BAC5CA,YAA6D,KAAA,EAA1D,OAAM,yCAAA,GAAyC,SAAO;AAAA,0BACnB,OAAA,UAAM,0BAA5CM,YAA4E,OAAA;AAAA;4BAAvE,OAAM;AAAA,0BAAA,GAAiD,YAAU;;;uCAK1E,MAiBM;AAAA,yBAjBM,UAAA,sBAAZA,YAiBM,OAAA;AAAA;0BAjBiB,OAAM;AAAA,wBAAA;0BAC3BN,YAGM,OAAA,MAAA;AAAA,4BAFJA,YAA0C,KAAA,EAAvC,OAAM,qBAAA,GAAqB,UAAQ;AAAA,4BACtCA,YAAmE,OAAhE,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,YAAQ,GAAA,GAAA,CAAA;AAAA,0BAAA;0BAEvDH,YAGM,OAAA,MAAA;AAAA,4BAFJA,YAAuC,KAAA,EAApC,OAAM,qBAAA,GAAqB,OAAK;AAAA,4BACnCA,YAAgE,OAA7D,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,SAAK,GAAA,GAAA,CAAA;AAAA,0BAAA;0BAEpDH,YAGM,OAAA,MAAA;AAAA,4BAFJA,YAAsC,KAAA,EAAnC,OAAM,qBAAA,GAAqB,MAAI;AAAA,4BAClCA,YAA+D,OAA5D,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,QAAI,GAAA,GAAA,CAAA;AAAA,0BAAA;0BAEnDH,YAGM,OAAA,MAAA;AAAA,4BAFJA,YAA4C,KAAA,EAAzC,OAAM,qBAAA,GAAqB,YAAU;AAAA,4BACxCA,YAAqE,OAAlE,OAAM,2BAAA,GAA0BG,gBAAI,KAAA,OAAM,cAAU,GAAA,GAAA,CAAA;AAAA,0BAAA;;;;;oBAM7DH,YAGM,OAAA,EAHD,OAAM,UAAM;AAAA,sBACfA,YAA2E,KAAA,EAAxE,OAAM,8CAAA,GAA8C,kBAAgB;AAAA,sBAC9C,KAAA,OAAM,mBAA/BM,YAA6D,mBAAA;AAAA;wBAAzB,cAAc,KAAA,MAAK;AAAA,sBAAA;;;;;;;;;;;;;;;;;;;;","names":["_withAsyncContext","_unref","_push","_parent","_scopeId","_createVNode","_ssrInterpolate","_createTextVNode","_toDisplayString","_ssrRenderComponent","_","_createBlock"],"sources":["../../../../../../../app/components/TechnicianTickets.vue","../../../../../../../app/pages/supervisor/technicians/[id].vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { getAssignedTickets } from '~/api/tickets/tickets'\r\n\r\nconst props = defineProps<{\r\n  technicianId?: string\r\n  filters?: {\r\n    status?: string\r\n    priority?: string\r\n    category_id?: string\r\n  }\r\n}>()\r\n\r\nconst columns = [\r\n  { accessorKey: 'id', header: 'ID' },\r\n  { accessorKey: 'title', header: 'Title' },\r\n  { accessorKey: 'description', header: 'Description' },\r\n  { accessorKey: 'status', header: 'Status' },\r\n  { accessorKey: 'priority', header: 'Priority' },\r\n  { accessorKey: 'category.name', header: 'Category' },\r\n  { accessorKey: 'created_at', header: 'Created At' },\r\n  {\r\n    accessorKey: 'actions',\r\n    header: 'Actions',\r\n    // cell: () => null\r\n  }\r\n]\r\n\r\n\r\nconst { data: tickets, status, refresh } = await useAsyncData(\r\n  'tickets',\r\n  () => props.technicianId ? getAssignedTickets(props.technicianId) : getAssignedTickets(''),\r\n  {\r\n    watch: [() => props.filters, () => props.technicianId],\r\n    server: false,\r\n    lazy: false,\r\n    default: () => []\r\n  }\r\n)\r\n\r\nconst data = computed(() => {\r\n  // Support paginated API: { data: { data: [...] } }\r\n  if (!tickets.value) return []\r\n  if (Array.isArray(tickets.value)) return tickets.value\r\n  if (tickets.value.data && Array.isArray(tickets.value.data)) return tickets.value.data\r\n  if (tickets.value.data && tickets.value.data.data && Array.isArray(tickets.value.data.data)) return tickets.value.data.data\r\n  return []\r\n})\r\n\r\nconst prioritiesClass = (s) => {\r\n  const map = {\r\n    low: 'bg-green-100 text-green-800',\r\n    medium: 'bg-yellow-100 text-yellow-800',\r\n    high: 'bg-orange-100 text-orange-800',\r\n    critical: 'bg-red-100 text-red-800'\r\n  }\r\n  return map[String(s)] || 'bg-gray-50 text-gray-700'\r\n}\r\n\r\nconst statusClass = (s) => {\r\n  const map = {\r\n    open: 'bg-green-100 text-green-800',\r\n    in_progress: 'bg-yellow-100 text-yellow-800',\r\n    pending: 'bg-orange-100 text-orange-800',\r\n    resolved: 'bg-blue-100 text-blue-800',\r\n    closed: 'bg-gray-100 text-gray-600'\r\n  }\r\n  return map[String(s)] || 'bg-gray-50 text-gray-700'\r\n}\r\n\r\nconst statusLabel = (s) => {\r\n  if (!s) return ''\r\n  if (s === 'in_progress') return 'In Progress'\r\n  return String(s).replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\r\n}\r\n\r\nconst formatDate = (val) => {\r\n  if (!val) return ''\r\n  const d = new Date(val)\r\n  if (Number.isNaN(d.getTime())) return String(val)\r\n  const day = d.getDate()\r\n  const month = d.toLocaleString('en-US', { month: 'short' })\r\n  const year = d.getFullYear()\r\n  let hour = d.getHours()\r\n  const minute = d.getMinutes()\r\n  const ampm = hour >= 12 ? 'pm' : 'am'\r\n  hour = hour % 12 || 12\r\n  const minutePart = minute ? `:${String(minute).padStart(2, '0')}` : ''\r\n  return `${day} ${month} ${year} ${hour}${minutePart}${ampm}`\r\n}\r\n\r\n\r\nconst role = useCookie('role')\r\nlet link = ''\r\nif (role.value === 'technician') {\r\n  link = '/technician/tickets/'\r\n}\r\nelse if (role.value === 'supervisor') {\r\n  link = '/supervisor/tickets/'\r\n}\r\nelse if (role.value === 'user') {\r\n  link = '/user/tickets/'\r\n}\r\n\r\n\r\nonNuxtReady(() => {\r\n  refresh()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <UTable \r\n    :data=\"data\" \r\n    :columns=\"columns\"\r\n    :loading=\"status === 'pending'\"\r\n  >\r\n    <template #actions-cell=\"{ row }\">\r\n      <div class=\"flex gap-2\">\r\n        <UButton\r\n          size=\"xs\"\r\n          color=\"primary\"\r\n          variant=\"soft\"\r\n          icon=\"i-lucide-eye\"\r\n          :to=\"`${link}${row.original.id}`\"\r\n        >\r\n          View\r\n        </UButton>\r\n      </div>\r\n    </template>\r\n    <template #status-cell=\"{ row }\">\r\n        <div class=\"flex items-center\">\r\n          <UBadge color=\"neutral\" variant=\"soft\" :class=\"`${statusClass(row.original.status)} px-2 py-1 text-xs font-semibold`\">\r\n            {{ statusLabel(row.original.status) }}\r\n          </UBadge>\r\n        </div>\r\n      </template>\r\n      <template #priority-cell=\"{ row }\">\r\n        <div class=\"flex items-center\">\r\n          <UBadge color=\"neutral\" variant=\"soft\" :class=\"`${prioritiesClass(row.original.priority)} px-2 py-1 text-xs font-semibold`\">\r\n            {{ statusLabel(row.original.priority) }}\r\n          </UBadge>\r\n        </div>\r\n      </template>\r\n  </UTable>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport { useRoute, useRouter } from '#imports'\r\nimport { getTechnician } from '~/api/users/users'\r\nimport TechnicianTickets from '~/components/TechnicianTickets.vue'\r\nimport { computed, onMounted, ref, reactive, watch } from 'vue'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst userId = computed(() => route.params.id as string)\r\nconst isEditing = ref(false)\r\nconst isSubmitting = ref(false)\r\n\r\nconst form = reactive({\r\n  username: '',\r\n  email: '',\r\n  password: '',\r\n  role: '',\r\n  department: ''\r\n})\r\n\r\nconst user = ref(null as any)\r\nconst status = ref<'idle'|'pending'|'success'|'error'>('idle')\r\nconst error = ref(null as any)\r\n\r\nconst roles = ['user', 'technician', 'supervisor', 'admin']\r\n\r\nconst loadUser = async () => {\r\n  if (!userId.value) return\r\n  status.value = 'pending'\r\n  error.value = null\r\n  try {\r\n    const data = await getTechnician(userId.value)\r\n    user.value = data\r\n    form.username = data?.username || ''\r\n    form.email = data?.email || ''\r\n    form.role = data?.role || ''\r\n    form.department = data?.department || ''\r\n    status.value = 'success'\r\n  } catch (err) {\r\n    error.value = err\r\n    status.value = 'error'\r\n  }\r\n}\r\n\r\nconst refresh = () => loadUser()\r\n\r\n\r\nonMounted(() => loadUser())\r\nwatch(userId, (v, ov) => { if (v && v !== ov) loadUser() })\r\n\r\n</script>\r\n\r\n<template>\r\n  <UDashboardGroup>\r\n    <Sidebar />\r\n    <UDashboardPage class=\"flex flex-col flex-1 min-w-0 overflow-hidden\">\r\n      <Navbar title=\"User details\" icon=\"i-lucide-user\" class=\"w-full\" />\r\n      <div class=\"flex flex-col flex-1 gap-6 p-6 overflow-auto\">\r\n        <div class=\"flex items-center justify-between gap-3\">\r\n          <UDashboardPageHeader\r\n            :title=\"user?.username || 'User'\"\r\n            :description=\"user?.email || ''\"\r\n          />\r\n          \r\n        </div>\r\n\r\n        <UCard>\r\n          <template #header>\r\n            <div class=\"flex items-center justify-between\">\r\n              <p class=\"text-sm font-semibold text-highlighted\">Profile</p>\r\n              <div class=\"text-xs text-muted\" v-if=\"status === 'pending'\">Loading...</div>\r\n            </div>\r\n          </template>\r\n\r\n          <!-- View Mode -->\r\n          <div v-if=\"!isEditing\" class=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n            <div>\r\n              <p class=\"text-xs text-muted\">Username</p>\r\n              <p class=\"text-sm text-highlighted\">{{ user?.username || '—' }}</p>\r\n            </div>\r\n            <div>\r\n              <p class=\"text-xs text-muted\">Email</p>\r\n              <p class=\"text-sm text-highlighted\">{{ user?.email || '—' }}</p>\r\n            </div>\r\n            <div>\r\n              <p class=\"text-xs text-muted\">Role</p>\r\n              <p class=\"text-sm text-highlighted\">{{ user?.role || '—' }}</p>\r\n            </div>\r\n            <div>\r\n              <p class=\"text-xs text-muted\">Department</p>\r\n              <p class=\"text-sm text-highlighted\">{{ user?.department || '—' }}</p>\r\n            </div>\r\n          </div>\r\n\r\n        </UCard>\r\n\r\n        <div class=\"mt-6\">\r\n          <p class=\"text-sm font-semibold text-highlighted mb-2\">Assigned Tickets</p>\r\n          <TechnicianTickets v-if=\"user?.id\" :technicianId=\"user.id\" />\r\n        </div>\r\n      </div>\r\n    </UDashboardPage>\r\n  </UDashboardGroup>\r\n</template>\r\n"],"version":3}