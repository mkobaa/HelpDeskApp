import{s as v,c as w,_ as C,a as j,b as U}from"./Ddr_hDuZ.js";import{_ as $}from"./GPD3P-m0.js";import{_ as T}from"./RuDiqTgZ.js";import{Y as h,g as B,P as D,h as I,j as S,c as g,o as f,a as o,b as i,w as m,d as k,F as P,q as A,k as y,t as u,L as b,_ as R,a2 as x}from"./BGim2kwq.js";import{_ as z}from"./ByZrW5nx.js";import"./kDLvYEi9.js";import"./K8s1tnq0.js";import"./CvGMUJgZ.js";import"./DYcZGXPK.js";import"./B6rNHc4N.js";import"./RmwAmyau.js";const E=async(c="")=>{let t=h("auth_token").value||"";try{t=decodeURIComponent(t)}catch{}let n="http://localhost:8000/api/stats/open-tickets";c&&(n+=`?name=${encodeURIComponent(c)}`);const s=await fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${t}`}}),e=await s.json();if(!s.ok)throw e;return e?.data?.open_tickets_count!==void 0?e.data.open_tickets_count:0},G=async(c="")=>{let t=h("auth_token").value||"";try{t=decodeURIComponent(t)}catch{}let n="http://localhost:8000/api/stats/pending-tickets";c&&(n+=`?name=${encodeURIComponent(c)}`);const s=await fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${t}`}}),e=await s.json();if(!s.ok)throw e;return e?.data?.pending_tickets_count!==void 0?e.data.pending_tickets_count:0},L=async(c="")=>{let t=h("auth_token").value||"";try{t=decodeURIComponent(t)}catch{}let n="http://localhost:8000/api/stats/closed-tickets";c&&(n+=`?name=${encodeURIComponent(c)}`);const s=await fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${t}`}}),e=await s.json();if(!s.ok)throw e;return e?.data?.closed_tickets_count!==void 0?e.data.closed_tickets_count:0},N={class:"space-y-4"},F={class:"flex items-center justify-between gap-3"},O={class:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3"},V={class:"flex items-start justify-between"},H={class:"space-y-1"},q={class:"text-xs font-semibold uppercase tracking-wide text-muted-500"},M={class:"text-3xl font-semibold text-gray-900"},W={class:"text-sm text-muted-500"},Y={class:"flex items-center gap-2 text-sm"},J={class:"text-muted-500"},K=B({__name:"SupervisorDashboard",setup(c){const l=D([{key:"open",label:"Open tickets",value:0,icon:"i-lucide-flame",iconBg:"bg-amber-500",badgeColor:"amber",dot:"bg-amber-500"},{key:"pending",label:"Pending tickets",value:0,icon:"i-lucide-clock-3",iconBg:"bg-sky-500",badgeColor:"sky",dot:"bg-sky-500"},{key:"closed",label:"Closed tickets",value:0,icon:"i-lucide-check-circle-2",iconBg:"bg-emerald-500",badgeColor:"emerald",dot:"bg-emerald-500"}]);let t=null;const n=async()=>{try{const[s,e,r]=await Promise.all([E(),G(),L()]),d=l.find(_=>_.key==="open");d&&(d.value=s);const p=l.find(_=>_.key==="pending");p&&(p.value=e);const a=l.find(_=>_.key==="closed");a&&(a.value=r)}catch(s){console.error("Failed to fetch stats:",s)}};return I(()=>{n(),t=v(n,5e3)}),S(()=>{t&&clearInterval(t)}),(s,e)=>{const r=w,d=$,p=T;return f(),g("section",N,[o("div",F,[e[1]||(e[1]=o("div",{class:"space-y-0.5"},[o("p",{class:"text-sm text-muted-500"},"Supervisor"),o("h2",{class:"text-lg font-semibold text-gray-900"},"Ticket status"),o("p",{class:"text-sm text-muted-500"},"Snapshot of tickets by status")],-1)),i(r,{color:"primary",variant:"soft",icon:"i-lucide-activity"},{default:m(()=>[...e[0]||(e[0]=[k("Live",-1)])]),_:1})]),o("div",O,[(f(!0),g(P,null,A(l,a=>(f(),y(p,{key:a.key,class:"h-full",ui:{body:"flex flex-col gap-3",background:"bg-white"}},{default:m(()=>[o("div",V,[o("div",H,[o("p",q,u(a.label),1),o("p",M,u(a.value.toLocaleString()),1),o("p",W,u(a.hint),1)]),o("div",{class:b(["flex h-12 w-12 items-center justify-center rounded-xl text-white",a.iconBg])},[i(d,{name:a.icon,class:"h-6 w-6"},null,8,["name"])],2)]),o("div",Y,[i(r,{color:a.badgeColor,variant:"soft",class:"flex items-center gap-2"},{default:m(()=>[o("span",{class:b(["h-2 w-2 rounded-full",a.dot])},null,2),k(" "+u(a.trend),1)]),_:2},1032,["color"]),o("span",J,u(a.note),1)])]),_:2},1024))),128))])])}}}),Q=Object.assign(K,{__name:"SupervisorDashboard"}),X={},Z={class:"flex flex-col flex-1 gap-6 p-6 overflow-auto"},ee={class:"flex items-center justify-between gap-3"};function te(c,l){const t=j,n=U,s=x("UDashboardPageHeader"),e=Q,r=z,d=x("UDashboardPage"),p=C;return f(),y(p,null,{default:m(()=>[i(t),i(d,{class:"flex flex-col flex-1 min-w-0 overflow-hidden"},{default:m(()=>[i(n,{title:"Dashboard",icon:"i-lucide-house",class:"w-full"}),o("div",Z,[o("div",ee,[i(s,{title:"Dashboard",description:"Welcome to your dashboard."})]),i(e),i(r,{class:"flex-1 w-full",forceStatus:"all"})])]),_:1})]),_:1})}const ue=R(X,[["render",te]]);export{ue as default};
