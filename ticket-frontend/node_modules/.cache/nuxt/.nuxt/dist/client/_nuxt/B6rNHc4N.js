import{Y as i}from"./BGim2kwq.js";const d=async(t={})=>{let o=i("auth_token").value||"";try{o=decodeURIComponent(o)}catch{}const a=new URLSearchParams;t.status&&a.append("status",t.status),t.priority&&a.append("priority",t.priority),t.category_id&&a.append("category_id",t.category_id),t.page&&a.append("page",String(t.page)),t.per_page&&a.append("per_page",String(t.per_page)),typeof t=="string"?a.append("name",t):t.name&&a.append("name",t.name);let n="http://localhost:8000/api/tickets";const e=a.toString();e&&(n+=`?${e}`);const c=await fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${o}`}}),r=await c.json();if(!c.ok)throw r;return t._raw?r:r?.data?.data&&Array.isArray(r.data.data)?r.data.data:Array.isArray(r)?r:Array.isArray(r.data)?r.data:Array.isArray(r.tickets)?r.tickets:[]},u=async t=>{if(!t)return null;let o=i("auth_token").value||"";try{o=decodeURIComponent(o)}catch{}const a=`http://localhost:8000/api/tickets/${encodeURIComponent(t)}`;try{const n=await fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${o}`}}),e=await n.json();return n.ok?e?.data?e.data:e?.ticket?e.ticket:e??null:(console.error("getTicketById failed",e),null)}catch(n){return console.error("getTicketById network error",n),null}},l=async()=>{let s=i("auth_token").value||"";try{s=decodeURIComponent(s)}catch{}const a=await fetch("http://localhost:8000/api/technicians/workloads",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${s}`}}),n=await a.json();if(!a.ok)throw n;return Array.isArray(n?.data)?n.data:[]},y=async t=>{let o=i("auth_token").value||"";try{o=decodeURIComponent(o)}catch{}const a=`http://localhost:8000/api/technicians/${encodeURIComponent(t)}/assigned-tickets`,n=await fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${o}`}}),e=await n.json();if(!n.ok)throw e;return Array.isArray(e?.data?.data)?e.data.data:Array.isArray(e?.data)?e.data:Array.isArray(e?.tickets)?e.tickets:Array.isArray(e)?e:[]};export{d as a,y as b,l as c,u as g};
