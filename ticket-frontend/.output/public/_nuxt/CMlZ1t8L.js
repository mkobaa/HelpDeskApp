import{_ as D,a as P,b as B}from"./Ddr_hDuZ.js";import{a0 as N}from"./GPD3P-m0.js";import{_ as j}from"./RuDiqTgZ.js";import{g as $,Y as A,$ as R,a1 as V,k as z,w as i,a2 as _,o as c,b as n,a as e,f as s,d as E,c as u,p as f,t as d}from"./BGim2kwq.js";import{u as T}from"./RmwAmyau.js";import"./kDLvYEi9.js";import"./K8s1tnq0.js";const G={class:"flex flex-col flex-1 gap-6 p-6 overflow-auto"},H={class:"flex items-center justify-between gap-3"},S={class:"flex items-center justify-between"},F={key:0,class:"text-xs text-muted"},I={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},L={class:"text-sm text-highlighted"},M={class:"text-sm text-highlighted"},Y={class:"text-sm text-highlighted"},q={class:"text-sm text-highlighted"},J={key:0,class:"mt-4 text-sm text-error"},se=$({__name:"profile",async setup(K){let r,m;const x=A("auth_token"),h=async()=>{let l=x.value||"";try{l=decodeURIComponent(l)}catch{}const t=await fetch("http://localhost:8000/api/user",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${l}`}}),a=await t.json();if(!t.ok)throw a;return a?.data||a?.user||a},{data:o,status:g,error:v,refresh:p}=([r,m]=R(()=>T("current-user",h,{server:!1,lazy:!0,immediate:!1})),r=await r,m(),r);return V(()=>{p()}),(l,t)=>{const a=P,w=B,y=_("UDashboardPageHeader"),b=N,k=j,C=_("UDashboardPage"),U=D;return c(),z(U,null,{default:i(()=>[n(a),n(C,{class:"flex flex-col flex-1 min-w-0 overflow-hidden"},{default:i(()=>[n(w,{title:"My profile",icon:"i-lucide-user",class:"w-full"}),e("div",G,[e("div",H,[n(y,{title:s(o)?.username||"Profile",description:s(o)?.email||""},null,8,["title","description"]),n(b,{size:"sm",icon:"i-lucide-refresh-ccw",variant:"outline",onClick:s(p)},{default:i(()=>[...t[0]||(t[0]=[E(" Refresh ",-1)])]),_:1},8,["onClick"])]),n(k,null,{header:i(()=>[e("div",S,[t[1]||(t[1]=e("p",{class:"text-sm font-semibold text-highlighted"},"Profile",-1)),s(g)==="pending"?(c(),u("div",F,"Loading...")):f("",!0)])]),default:i(()=>[e("div",I,[e("div",null,[t[2]||(t[2]=e("p",{class:"text-xs text-muted"},"Username",-1)),e("p",L,d(s(o)?.username||"—"),1)]),e("div",null,[t[3]||(t[3]=e("p",{class:"text-xs text-muted"},"Email",-1)),e("p",M,d(s(o)?.email||"—"),1)]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-xs text-muted"},"Role",-1)),e("p",Y,d(s(o)?.role||"—"),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-xs text-muted"},"Department",-1)),e("p",q,d(s(o)?.department||"—"),1)])]),s(v)?(c(),u("div",J,"Failed to load profile.")):f("",!0)]),_:1})])]),_:1})]),_:1})}}});export{se as default};
